<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css" />
  <link rel="icon" type="image/x-icon" href="https://tse1-mm.cn.bing.net/th/id/OIP-C.lU4kOMw5lwhBp2-8nT0t0QHaH-?rs=1&pid=ImgDetMain" />
  <title>CONTROL SYSTEM</title>
</head>
<body>
<div id="header-placeholder"></div>
<br>
<a href="./home.html">
  <img src="images/cow.jpg" alt="logo" width="150" height="150" class="img" />
</a>
<!-- Account Dashboard -->
<div class="grid-display">
  <div class="grid-item">
    <p class="grid-title">Available Coins</p>
  </div>
  <div class="grid-item">
    <p class="grid-title">Today's Income</p>
  </div>
  <div class="grid-item">
    <p class="grid-title">Today's Losses</p>
  </div>
  <div class="grid-item">
    <p class="grid-title">Auto Earning
      <a href="autoearn.html"><img src="images/question.png" alt="auto earn" width="20" height="20" /></a>
    </p>
  </div>

  <!-- Available Coins -->
  <div class="grid-item">
    <p class="coins"></p>
  </div>

  <!-- Income -->
  <div class="grid-item">
    <p class="income"></p>
  </div>

  <!-- Losses -->
  <div class="grid-item">
    <p class="losses"></p>
  </div>

  <!-- Auto Earn -->
  <div class="grid-item">
    <p class="auto"></p>
  </div>
</div>

<div class="dropwdown">
  <!--  COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS COINS　   -->
  <button class="dropdownTitle" onclick="reveal('coins')">
    <h2 class="center">Add Coins</h2>
  </button>
  <div class="dropdownText" id="coins" style="display: none">
    <div class="add-coins-container">
      <input class="addCoins" placeholder="Coins" type="number" max="23" maxlength="2" />
      <input class="addReason" placeholder="Reason for Change" type="text" style="width: 30%" />
      <button onclick="openModal('addCoins')" class="controlButton">Add</button>
      <button onclick="openModal('clearCoins')" class="controlButton">Clear</button>
    </div>
    <!-- Money Tracker -->
    <div class="table-container">
      <table class="table">
        <tr>
          <th>Date</th>
          <th>Amount</th>
          <th>Purpose/Reason</th>
        </tr>
        <tr class="header">
          <td><b>SEPTEMBER</td>
          <td>55 M³</td>
          <td>Monthly Earnings</td>
        </tr>
        <tr class="header">
          <td><b>OCTOBER</td>
          <td>150 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>NOVEMBER</td>
          <td>52 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>DECEMBER</td>
          <td>50 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>JANUARY</td>
          <td>190 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>FEBRUARY</td>
          <td>321 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>MARCH</td>
          <td>107 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>MAY</td>
          <td>-102 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>JUNE</td>
          <td>148 M³</td>
          <td>Monthly earnings</td>
        </tr>
        <tr class="header">
          <td><b>PREVIOUS TOTAL</td>
          <td>373 M³</td>
          <td>Total earnings</td>
        </tr>

        <tbody id="tracker-table-body">
          <!-- Dynamic rows will be inserted here -->
        </tbody>
        <tr class="header" id="autoEarnTrackRow">
          <td><b>Auto Earnings (Total)</td>
          <td><span id="totalAutoEarn"></span> M³</td>
          <td><span id="whatAutoEarn"></span></td>
        </tr>
        <tr class="header">
          <td><b>Earned</td>
          <td><span id="totalAmountEarned"></span></td>
          <td>Total earnings this month</td>
        </tr>
      </table>
    </div>
  </div>
</div>

<br>
<div class="dropwdown">
  <!-- COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON COUPON 　   -->
  <button class="dropdownTitle" onclick="reveal('coupon')">
    <h2 class="center">Redeem Coupon</h2>
  </button>
  <div class="dropdownText" id="coupon" style="display: none">
    <br>  
    <div class="box"></div>
    <!-- <h1 class="center">Add Coins</h1> -->
    <div class="add-coins-container">
      <input class="addCoupon" placeholder="Amount" type="number" maxlength="2" />
      <input class="addReason" placeholder="Use" type="text" style="width: 30%" />
      <button onclick="openModal('addCoupon')" class="controlButton">Add</button>
      <button onclick="openModal('clearCoupons')" class="controlButton">Clear</button>
    </div>
    <!-- Coupon Tracker -->
    <div class="table-container">
      <table class="table">
        <tr>
          <th>Date</th>
          <th>Amount</th>
          <th>Purpose/Reason</th>
        </tr>
        <tbody id="coupon-tracker-table-body">
          <!-- Dynamic rows will be inserted here -->
        </tbody>
      </table>
    </div>
  </div>
</div>
<br>
<!-- PRESTIGE -->
<div class="dropwdown">
  <!-- PRESTIGE PRESTIGE PRESTIGE PRESTIGE PRESTIGE PRESTIGE PRESTIGE  PRESTIGE PRESTIGE  PRESTIGE PRESTIGE  PRESTIGE PRESTIGE  　   -->
  <button class="dropdownTitle" onclick="reveal('prestigeControl')">
    <h2 class="center">Prestige</h2>
  </button>
  <div class="dropdownText" id="prestigeControl" style="display: none">
    <div class="prestigeBox" id="prestigeBox">
    </div>
    <!-- <h1 class="center">Add Coins</h1> -->
    <div class="add-coins-container">
      <input class="addPrestige" placeholder="Add" type="number" maxlength="2" />
      <input class="addReason" placeholder="Reason" type="text" style="width: 30%" />
      <button onclick="openModal('addPrestige')" class="controlButton">Add</button>
      <button onclick="openModal('clearPrestige')" class="controlButton">Clear</button>
    </div>
  </div>

  <!-- Password Modal  -->
  <div id="passwordModal"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
    <div
      style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; border-radius: 5px;">
      <label for="modalPassword">Enter password:</label>
      <input type="password" id="modalPassword" />
      <button onclick="submitPassword()">Submit</button>
      <button onclick="closeModal()">Cancel</button>
      <div id="errorMessage" style="color: red; display: none;">Incorrect Password. You have been reported.</div>
    </div>
  </div>
  </body>


  <script type="module" src="script.js"></script>
  <script type="module" src="control.js"></script>


  <script>
    // Function to update the tracker table with data from localStorage
    function updateTracker() {
      const trackerTable = document.getElementById('tracker-table-body');
      const coinsData = JSON.parse(localStorage.getItem('coinsData')) || [];

      trackerTable.innerHTML = ''; // Clear existing rows

      coinsData.forEach(entry => {
        const row = document.createElement('tr');
        row.innerHTML = `
              <td>${entry.date}</td>
              <td>${entry.amount} M³</td>
              <td>${entry.reason}</td>
            `;
        trackerTable.appendChild(row);
      });
    }

    // Call the function to populate the table on page load
    updateTracker();
  </script>

</html>